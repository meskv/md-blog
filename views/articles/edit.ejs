<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/_head') %>
</head>

<body>
    <h1 class="mt-4 text-center">Edit Articles</h1>
    <div class="container">
        <form action="/articles/<%= article.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
            <% if (locals.message) { %>
                <p class="alert alert-dismissible fade show alert-<%= type %>  text-center">
                    <%= message %>
                </p>
                <% } %>
                    <%- include('_form_fields') %>
        </form>
    </div>

    <!-- Showdown Script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>

    <script>
        const textEditor = document.querySelector('#markdown');
        const textPreview = document.querySelector('#preview');
        const converter = new showdown.Converter({ tables: true, tasklists: true, smoothLivePreview: true })

        textEditor.addEventListener('keyup', event => {
            const { value } = event.target;
            html = converter.makeHtml(value);
            textPreview.innerHTML = html;
        })
    </script>

</body>

</html>